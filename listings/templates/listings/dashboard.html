{% extends "listings/base.html" %}
{% load static %}
{% load my_templatetags %}
{% block content %}
<link rel="stylesheet" href="{% static 'listings/dashboard.css' %}">
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
<div class="parent_container">
    <div class="welcome">
        {% if user_healthdata == None %}
            <h2>Welcome {{ seeker }} Start tracking your fitness and healthdata</h2>
            <a href="{% url 'track' %}">Track</a>
        {% else %}
            <h2>Welcome {{ seeker }} Your healthdata was last recorded on {{ latest_date.date_recorded|date:"F d, Y" }}
                <span><a href="{% url 'track' %}">Track</a></span>
            </h2>
        {% endif %}
    </div>

    <div class="demographics">
        <h1>Facts</h1>
        <p>
            Lorem, ipsum dolor sit amet consectetur adipisicing elit. Ratione quisquam accusantium debitis veniam facere. Repudiandae architecto iste nesciunt aperiam ad! Eos, asperiores quos doloremque tempore ratione accusantium ipsa adipisci ea.
            Mollitia atque iure ex assumenda quae eum dicta aperiam, facere esse, nulla obcaecati voluptates quasi facilis natus necessitatibus quam vel unde cumque ullam. Error cum culpa eum repellendus neque quis!
            Id veniam, ea amet iusto quo inventore quam praesentium eveniet mollitia quis consectetur tenetur magnam eligendi nisi, omnis quae impedit dolorum quas, laborum aliquam cum. Numquam odit veniam autem eaque.
            Exercitationem blanditiis recusandae est modi atque ipsa sed, illo voluptatibus ullam tenetur dignissimos vitae nesciunt, doloremque, ad eligendi delectus numquam debitis magni labore ut ducimus suscipit. Soluta corrupti voluptate itaque.
            Nisi ratione consequatur ex delectus impedit eius, cupiditate ab deserunt laboriosam facere minus voluptatibus. Optio repudiandae, magnam vel harum similique at illum possimus, impedit, modi mollitia doloremque? Saepe, eligendi aperiam.
        </p>    
    </div>

    <!-- <div class="healthdata">
        <h2>Welcome {{ seeker }}</h2>
        {% if user_healthdata == None %}
            <h2>Start tracking your fitness and healthdata</h2>
            <a href="{% url 'track' %}">Track</a>
        {% else %}
            <h2>Your healthdata was last recorded on {{ latest_date.date_recorded|date:"F d, Y" }}</h2>
            
            <a href="{% url 'track' %}">Track</a>
        {% endif %}
    </div> -->
    <hr>
    <div class="healthcare_providers">
        <h2>Filter HealthCare Providers</h2>
        <div class="filt_cont">
            <form method="get" class="filt_form">
                {{ filter.form }}
                <button type="submit">Search</button>
            </form>
        </div>
        <table class="listings_table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Speciality</th>
                    <th>Ethnicity</th>
                    <th>Consultation Charges</th>
                </tr>
            </thead>
            {% for listing in response %}
                <tr>
                    <td><a href="{% url 'listing' listing.listing_id %}">{{ listing.provider }}</a></td>
                    <td>{{ listing.speciality }}</td>
                    <td>{{ listing.ethnicity }}</td>
                    <td>{{ listing.consultation_charges }}</td>
                </tr>
            {% endfor %}
        </table>
    </div>
    <div class="paginator">
        <span>
            {% if response.has_previous %}
                <a href="?{% query_transform request page=1 %}">&laquo; first</a>
                <a href="?{% query_transform request page=response.previous_page_number %}">previous</a>
            {% endif %}

            <span class="current">
                Page {{ response.number }} of {{ response.paginator.num_pages }}
            </span>

            {% if response.has_next %}
                <a href="?{% query_transform request page=response.next_page_number %}">next</a>
                <a href="?{% query_transform request page=response.paginator.num_pages %}">last &raquo;</a>
            {% endif %}
        </span>
    </div>
</div>


<!-- <script>
$(document).ready(function () {

var $stepsChart = $("#line-chart");
$.ajax({
  url: $stepsChart.data("url"),
  success: function (data) {

    var ctx = $stepsChart[0].getContext("2d");

    new Chart(ctx, {
      type: 'line',
      data: {
        labels: data.labels,
        datasets: [{
          label: 'Steps',
          backgroundColor: 'blue',
          data: data.data,
          backgroundColor: [
              'rgba(255, 99, 132, 0.2)',
              'rgba(54, 162, 235, 0.2)',
              'rgba(255, 206, 86, 0.2)',
              'rgba(75, 192, 192, 0.2)',
              'rgba(153, 102, 255, 0.2)',
              'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
              'rgba(255, 99, 132, 1)',
              'rgba(54, 162, 235, 1)',
              'rgba(255, 206, 86, 1)',
              'rgba(75, 192, 192, 1)',
              'rgba(153, 102, 255, 1)',
              'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1,
            fill: false,
        }]          
      },
      options: {
        responsive: false,
        legend: {
          position: 'top',
        },
        title: {
          display: true,
          text: 'Steps'
        },
      }
    });

  }
});

});

</script> -->

{% endblock content %}